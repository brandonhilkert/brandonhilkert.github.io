
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	
	
	
  
  <title>Build a Ruby Gem Email Course - Structure | Brandon Hilkert</title>
	<meta name="author" content="Brandon Hilkert">

	<meta name="description" content="Building a Ruby Gem from scratch can be challenging if you're not familiar with the conventions. Join my free 10-day course to learn how to build your own Ruby &hellip;">
	

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:creator" content="@brandonhilkert">
  <meta name="twitter:title" content="Build a Ruby Gem Email Course - Structure">
  <meta name="twitter:description" content="Building a Ruby Gem from scratch can be challenging if you're not familiar with the conventions. Join my free 10-day course to learn how to build your own Ruby gems from scratch.">
  <meta name="twitter:image" content="http://brandonhilkert.com/images/brandon-hilkert.jpg">

  <meta property="og:title" content="Build a Ruby Gem Email Course - Structure | Brandon Hilkert"/>
  <meta property="og:url" content="http://brandonhilkert.com/courses/build-a-ruby-gem/structure.html"/>
  <meta property="og:site_name" content="Brandon Hilkert's Blog"/>
  <meta property="og:type" content="blog"/>

	<link href="/atom.xml" rel="alternate" title="Build a Ruby Gem Email Course - Structure | Brandon Hilkert" type="application/atom+xml">
	<link rel="canonical" href="http://brandonhilkert.com/courses/build-a-ruby-gem/structure.html">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Sorts+Mill+Goudy:400,400italic' rel='stylesheet' type='text/css'>
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet" type="text/css">
  <link rel="author" href="https://plus.google.com/u/0/116002935339410846674" />
  <script src="/javascripts/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
</head>


<body>
	<div class="container">
		<div class="left-col">
			<header id="header"><div class="profilepic">
  <a href="/">
    <img src="/images/brandon-hilkert.jpg" width="80" height="80" alt="Brandon Hilkert Profile Picture" />
  </a>
</div>
<hgroup>
  <h1><a href="/">Brandon Hilkert</a></h1>
  
</hgroup>

<nav id="main-nav">
  <ul class="main-navigation">
    <li><a href="/about">About</a></li>
    <li><a href="/">Blog</a></li>
    <li><a href="/newsletter">Newsletter</a></li>
    <li><a href="http://railsmasterclass.com" target="_blank">Workshop</a></li>
  </ul>
  <section class="aboutme">
    <p>
      Hi. I'm Brandon.
      <br />
      I'm a technology entrepreneur in PA.
    </p>
  </section>
</nav>

<nav id="sub-nav">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/brandonhilkert" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/brandonhilkert" title="GitHub">GitHub</a>
		
		
		<a class="linkedin" href="http://www.linkedin.com/in/brandonhilkert">LinkedIn</a>
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>

</header>
		</div>
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  
  <div class="date">








  


<time datetime="2013-12-02T05:43:00-05:00" data-updated="true" itemprop="datePublished">December 2<span>nd</span>, 2013</time></div>
	<h1 class="title" itemprop="name">Build a Ruby Gem Email Course - Structure</h1>
  <div class="tags">


	<a class='category' href='/blog/categories/course/'>course</a>, <a class='category' href='/blog/categories/email/'>email</a>, <a class='category' href='/blog/categories/gem/'>gem</a>, <a class='category' href='/blog/categories/open-source/'>open source</a>, <a class='category' href='/blog/categories/ruby/'>ruby</a>


</div>
	<div class="entry-content" itemprop="articleBody"><p><em>This post is a part of a free 10-day email course on Building a Ruby Gem. You
can find the others posts in the series below:</em></p>

<p><em><a href="/courses/build-a-ruby-gem/background.html">Background</a> &ndash;>
Structure &ndash;>
<a href="/courses/build-a-ruby-gem/testing.html">Testing</a></em></p>

<p>Last time, I mentioned we&rsquo;ll be building a gem named so_meta. This gem will
help us make the process of adding SEO meta tags to our Rails applications
simpler and more organized.</p>

<h3>Structure</h3>

<p>When I built my gem, one of the things I found most frustrating was knowing
what files went where. There seemed to be a very clear structure to the files
within the gem, but yet it took some poking around the internet to wrap my head
around it.</p>

<p>One of the best resources I&rsquo;ve found for this is, not surprisingly,
<a href="http://guides.rubygems.org/make-your-own-gem/#first-gem">RubyGems.org</a>. Their
guides help you get familiar with the conventions and structure of a Ruby gem.</p>

<p>Below is the most important paragraph on that page:</p>

<blockquote><p>Code for your package is placed within the lib directory. The convention is
to have one Ruby file with the same name as your gem, since that gets loaded
when require <code>hola</code> is run. That one file is in charge of setting up your
gem’s code and API.</p></blockquote>

<p>Get all that? If not, that&rsquo;s OK, we&rsquo;ll have plenty of examples below.
Fortunately, there are tools that will do this for us, so we don&rsquo;t have to
stress too much about the directory structure.</p>

<!--more-->


<h3>Naming</h3>

<p>One other consideration when building a Ruby gem is what you want to name it.
Naming is hard. This isn&rsquo;t anything new though&hellip;it&rsquo;s one of those old adages
in computer science. And it&rsquo;s no different for a Ruby gem.</p>

<p>Again, Rubygems.org provides another <a href="http://guides.rubygems.org/name-your-gem/">great guide on naming
conventions</a>. Take a quick minute to
read that (it&rsquo;s short!), I&rsquo;ll wait here&hellip;</p>

<p>(insert your favorite elevator music)</p>

<p>OK, now that you&rsquo;re completely schooled in the world of Ruby gem naming, let me
stress one of the points:</p>

<p><strong>Unless you know what you&rsquo;re doing, use dashes over underscores.</strong></p>

<p>Got that?!?! One more time&hellip;</p>

<p><strong>Unless you know what you&rsquo;re doing, use dashes over underscores.</strong></p>

<p>Why you ask? Because you&rsquo;ll get in to a world of hurt with require statements
and what files you suggest people include in their own code. It&rsquo;s not worth the
hassle. So keep it consistent with the rest of the community and use that link
as a guide when you&rsquo;re making naming decisions.</p>

<p>You&rsquo;ll also want to do a quick search on <a href="http://rubygems.org/">Rubygems.org</a>
and <a href="http://github.com">Github</a> to make sure that no one else is using that
name for a gem. On Rubygem.org, there&rsquo;s a search box in the upper right corner.
Do a quick search there:</p>

<p><img class="center" src="/images/courses/rubygem/rubygems-search.png" title="&#34;Search rubygems.org for the gem name you have in mind.&#34;" alt="&#34;Search rubygems.org for the gem name you have in mind.&#34;"></p>

<p>Here are the results:</p>

<p><img class="center" src="/images/courses/rubygem/rubygems-results.png" title="&#34;Search results for so_meta on rubygems.org&#34;" alt="&#34;Search results for so_meta on rubygems.org&#34;"></p>

<p>Fortunately, the only match is the gem that I actually built, so it looks like we&rsquo;re in good shape.</p>

<p><img class="center" src="/images/courses/rubygem/rubygems-so_meta.png" title="&#34;The so_meta detail page on rubygems.org&#34;" alt="&#34;The so_meta detail page on rubygems.org&#34;"></p>

<p>If you do find a gem with the same as something you want, do everyone a favor
and choose something different. It will not only confuse people using the
existing gem, but it will confuse those that may use your gem down the road.</p>

<h3>Bundler</h3>

<p>Remember your old friend bundler? It turns out that bundler packs more
functionality than you might have thought. Aside from using it to install gems
for an application (<code>bundle install</code>), Bundler also has commands built-in to
help you manage creating and maintaining a Ruby gem.</p>

<p>Here&rsquo;s the entry from the manage:</p>

<figure class='code'><pre><code>$ bundle help
...

bundle gem(1)
  Create a simple gem, suitable for development with bundler
...</code></pre></figure>


<p>So what are you waiting for? Let&rsquo;s make our first Ruby gem!</p>

<figure class='code'><pre><code>$ bundle gem so_meta</code></pre></figure>


<p>As you can see above, just preface the name of your gem with <code>bundle gem</code> and
let it do its thing. Let&rsquo;s look at what it created:</p>

<figure class='code'><pre><code>├── Gemfile
├── LICENSE.txt
├── README.md
├── Rakefile
├── lib
│   ├── so_meta
│   │   └── version.rb
│   └── so_meta.rb
└── so_meta.gemspec

2 directories, 7 files</code></pre></figure>


<p>A couple things to note&hellip;there&rsquo;s a <code>lib</code> directory that includes both a
<strong>file</strong> named <code>so_meta.rb</code> and a <strong>directory</strong> named <code>so_meta</code>. This is
consistent with Rubygems.org&rsquo;s recommendation. I&rsquo;ll post the quote again and
substitute our gem&rsquo;s name for theirs:</p>

<blockquote><p>Code for your package is placed within the lib directory. The convention is
to <strong>have one Ruby file with the same name as your gem</strong>, since that gets
loaded when require <code>so_meta</code> is run. That one file is in charge of setting
up your gem’s code and API.</p></blockquote>

<p>So that single file will do the legwork of loading any other files we need. And
that other code is suggested to be placed in the <code>lib/so_meta</code> directory.</p>

<p>Sound good? We&rsquo;ll put some actual code in both of those places later in the
course.</p>

<p>I&rsquo;ll be making tags in the Github repository so that I can reference full diffs
as we go. I&rsquo;ve committed the steps above. Here&rsquo;s the <a href="https://github.com/brandonhilkert/so_meta_course/commit/4a7805e06ec3e29f9381c7e0883099939f2ce7ff">full
diff</a>.</p>

<h3>Public API</h3>

<p>The last thing I&rsquo;d like you to do today is think about what your public API
will look like. And when I saw &ldquo;API&rdquo;, I mean, the methods that your consuming
application will use from your gem.</p>

<p>Often times, it&rsquo;s easy to get lost in the writing fancy code in insolation, but
be reminded that the point of this thing is to encapsulate logic or behavior
that will live outside your application. So you will be using this gem within
your application and want to be able to call the methods it provides in a
simple and straight-forward way.</p>

<p>With <code>so_meta</code> in mind, I know I want a view helper for the Rails layout to
provide me easy access to meta tags. I&rsquo;d like it to look like:</p>

<figure class='code'><pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
  &lt;head&gt;
    &lt;title&gt;&lt;%= so_meta(:title) %&gt;&lt;/title&gt;
    &lt;meta name="description" content="&lt;%= so_meta(:description) %&gt;" /&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre></figure>


<p>This means we&rsquo;ll need some kind of view helper method named <code>so_meta</code> and that&rsquo;s exactly
what we&rsquo;ll discuss next time! See you then.</p>
</div>
  


</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">

	
  <a href="http://bufferapp.com/add" class="buffer-add-button" data-count="horizontal" data-via="brandonhilkert" >Buffer</a>
  <script type="text/javascript" src="http://static.bufferapp.com/js/button.js"></script>
	

	
	<a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
	

	
	<a class="addthis_button_tweet"></a>
	

	
  <script type="IN/Share" data-counter="right"></script>
	

	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	

	<!-- <a class="addthis_counter addthis_pill_style"></a> -->
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>

</div>
			</div>
      
        <footer id="footer" class="inner"><p>
  Copyright &copy; 2013 - Brandon Hilkert
</p>
</footer>
        <script src="/javascripts/slash.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'brandonhilkert';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://brandonhilkert.com/courses/build-a-ruby-gem/structure.html';
        var disqus_url = 'http://brandonhilkert.com/courses/build-a-ruby-gem/structure.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



      
		</div>
	</div>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24469169-1', 'brandonhilkert.com');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');
</script>

</body>
</html>
