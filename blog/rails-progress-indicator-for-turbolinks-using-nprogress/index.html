
<!DOCTYPE HTML>
<html xmlns:og="http://ogp.me/ns#" xmlns:fb="http://ogp.me/ns/fb#">
<head>
	<meta charset="utf-8">
	
	
	
  
  
  <title>Rails Progress Indicator for Turbolinks Using Nprogress | Brandon Hilkert</title>
	<meta name="author" content="Brandon Hilkert">

	<meta name="description" content="April 29th, 2016 Rails Progress Indicator for Turbolinks Using Nprogress ajax, open source, rails, ruby, turbolinks Contrary to popular opinion, I&rsquo;m a &hellip;">
	

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:creator" content="@brandonhilkert">
  <meta name="twitter:title" content="Rails Progress Indicator for Turbolinks Using Nprogress">
  <meta name="twitter:description" content="April 29th, 2016 Rails Progress Indicator for Turbolinks Using Nprogress ajax, open source, rails, ruby, turbolinks Contrary to popular opinion, I&rsquo;m a fan of Turbolinks.
I leave it enabled in &hellip;">
  <meta name="twitter:image" content="http://brandonhilkert.com/images/brandon-hilkert.jpg">

  <meta property="og:title" content="Rails Progress Indicator for Turbolinks Using Nprogress | Brandon Hilkert"/>
  <meta property="og:description" content="April 29th, 2016 Rails Progress Indicator for Turbolinks Using Nprogress ajax, open source, rails, ruby, turbolinks Contrary to popular opinion, I&rsquo;m a fan of Turbolinks.
I leave it enabled in &hellip;">
  <meta property="og:url" content="http://brandonhilkert.com/blog/rails-progress-indicator-for-turbolinks-using-nprogress/"/>
  <meta property="og:image" content="http://brandonhilkert.com/images/brandon-hilkert-large.jpg" />
  <meta property="og:site_name" content="Brandon Hilkert's Blog"/>
  <meta property="og:type" content="article"/>
  <meta property="fb:profile_id" content="1472745932"/>

	<link href="/atom.xml" rel="alternate" title="Rails Progress Indicator for Turbolinks Using Nprogress | Brandon Hilkert" type="application/atom+xml">
	<link rel="canonical" href="http://brandonhilkert.com/blog/rails-progress-indicator-for-turbolinks-using-nprogress/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href="//fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet" type="text/css">
  <link rel="author" href="https://plus.google.com/u/0/116002935339410846674" />
  <script src="/javascripts/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-24469169-1', 'auto');
  ga('require', 'linkid', 'linkid.js');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');
</script>

</head>


<body>
	<div class="container">
		<div class="left-col">
			<header id="header"><div class="profilepic">
  <a href="/">
    <img src="/images/brandon-hilkert.jpg" width="80" height="80" alt="Brandon Hilkert Profile Picture" />
  </a>
</div>
<hgroup>
  <h1><a href="/">Brandon Hilkert</a></h1>
  
</hgroup>

<nav id="main-nav">
  <ul class="main-navigation">
    <li><a href="/about/">About</a></li>
    <li><a href="/">Blog</a></li>
    <li><a href="/newsletter/">Newsletter</a></li>
    <!-- <li> -->
    <!--   <a href="/courses/build&#45;a&#45;ruby&#45;gem/">Courses</a> -->
    <!-- </li> -->
    <li>
      <div class="new-label">New</div>
      <a href="/books/build-a-ruby-gem/">Books</a>
    </li>
    <li>
      <a href="/talks/">Talks</a>
    </li>
    <!-- <li> -->
    <!--   <a href="/tools/">Tools</a> -->
    <!-- </li> -->
  </ul>
</nav>

<nav id="sub-nav">
	<div class="social">
		
		
		
		<a class="twitter" href="https://twitter.com/brandonhilkert" title="Twitter">Twitter</a>
		
		
		<a class="github" href="https://github.com/brandonhilkert" title="GitHub">GitHub</a>
		
		
		<a class="linkedin" href="http://www.linkedin.com/in/brandonhilkert">LinkedIn</a>
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>

<aside class="popular-posts">
  <h4>Popular Posts</h4>
<ul>
  <li>
    <a href="/blog/7-reasons-why-im-sticking-with-minitest-and-fixtures-in-rails/">7 Reasons I'm sticking with Minitest</a>
  </li>
  <li>
    <a href="/blog/organizing-javascript-in-rails-application-with-turbolinks/">Organizing JS in Rails w/ Turbolinks</a>
  </li>
  <li>
    <a href="/blog/using-rails-4-dot-1-secrets-for-configuration/">Using Rails 4 Secrets for Config</a>
  </li>
  <li>
    <a href="/blog/using-rails-fixtures-to-seed-a-database/">Using Fixtures to Seed a Database</a>
  </li>
  <li>
    <a href="/blog/ruby-gem-configuration-patterns/">Ruby Gem Configuration Patterns</a>
  </li>
  <!-- <li> -->
  <!--   <a href="/blog/how&#45;to&#45;build&#45;a&#45;rails&#45;engine/">How to Build a Rails Engine</a> -->
  <!-- </li> -->
  <!-- <li> -->
  <!--   <a href="/blog/why&#45;i&#45;wrote&#45;the&#45;sucker&#45;punch&#45;gem/">Why I Wrote the Sucker Punch Gem</a> -->
  <!-- </li> -->
  <!-- <li> -->
  <!--   <a href="/blog/setting&#45;up&#45;a&#45;cloudfront&#45;cdn&#45;for&#45;rails/">Setup a Cloudfront CDN for Rails</a> -->
  <!-- </li> -->
  <!-- <li> -->
  <!--   <a href="/blog/3&#45;ways&#45;to&#45;get&#45;started&#45;contributing&#45;to&#45;open&#45;source/">Get Started with Open Source</a> -->
  <!-- </li> -->
</ul>


</aside>

</header>
		</div>
		<div class="mid-col">
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  
  <div class="date">








  


<time datetime="2016-04-29T09:44:00-04:00" data-updated="true" itemprop="datePublished">April 29<span>th</span>, 2016</time></div>
	<h1 class="title" itemprop="name">Rails Progress Indicator for Turbolinks Using Nprogress</h1>
  <div class="tags">


	<a class='category' href='/blog/categories/ajax/'>ajax</a>, <a class='category' href='/blog/categories/open-source/'>open source</a>, <a class='category' href='/blog/categories/rails/'>rails</a>, <a class='category' href='/blog/categories/ruby/'>ruby</a>, <a class='category' href='/blog/categories/turbolinks/'>turbolinks</a>


</div>
	<div class="entry-content" itemprop="articleBody">
    

    <p>Contrary to popular opinion, I&rsquo;m a fan of <a href="https://github.com/turbolinks/turbolinks">Turbolinks</a>.
I leave it enabled in all my Rails applications. Most of the negative opinions I hear relate to it &ldquo;breaking&rdquo; third-party jQuery plugins. I say &ldquo;breaking&rdquo; because it&rsquo;s not <em>really</em> changing the plugin&rsquo;s behavior &mdash; just requires the plugin to be initialized differently.</p>

<!--more-->


<p>If you&rsquo;re upgrading to a newer version of Rails and have a bunch of legacy JavaScript code, I can imagine this being difficult. But if you&rsquo;re green-fielding a new application, there&rsquo;s no reason not to take advantage of it. I wrote extensively about <a href="http://brandonhilkert.com/blog/organizing-javascript-in-rails-application-with-turbolinks/">how to organize JavaScript in a Rails application with Turbolinks enabled</a>. If you&rsquo;re struggling to get your JavaScript code to work as expected on clicks through the application, take a look at that post. I continue to use that organization pattern for all my applications and it never lets me down.</p>

<p>With Turbolinks enabled, interacting with an application feels smooth and fast. No more full page refreshes.</p>

<p>Every once in awhile we&rsquo;ll stumble on a page request takes longer than others. Rather than having the user sit there thinking nothing is happening, we can offer better feedback through a loading progress bar, specifically <a href="http://ricostacruz.com/nprogress/">nprogress</a>. I&rsquo;ve found it to be the perfect companion to Turbolinks to create a great user experience.</p>

<h2>The Problem</h2>

<p>In a traditional web application, when we click a link or submit a form, we get a loading spinner where the favicon typically appears. We might also see text in the status bar saying &ldquo;Connecting&hellip;&rdquo; or &ldquo;Loading&hellip;&rdquo;. These are the loading indications that internet users have become accustomed to.</p>

<p>By adopting Turbolinks, we not longer get those loading feedback mechanisms because the request for the new page is asynchronous. Once the request is complete, the new content is rendered in place of the previous page&rsquo;s body element. For fast page loads, this isn&rsquo;t a problem. However, if you have applications like mine, every once in awhile, you might have a page request take a few seconds (reasons for this are beyond the scope of this article). In those cases, a user might click a link and sit there for 2-3 sec. without any indication the page is loading. While Turbolinks generally improves the user experience of our application, having no user feedback for several seconds is not ideal (ideally, you&rsquo;d want to address a page request that takes multiple seconds). This is where <code>nprogress</code> can help.</p>

<h2>The Solution</h2>

<p><a href="http://ricostacruz.com/nprogress/"><code>nprogress</code></a> is a progress loading indicator, like what you see on YouTube.</p>

<p>Like other JavaScript libraries, there&rsquo;s <a href="https://github.com/caarlos0/nprogress-rails">a Ruby Gem that vendors the code and includes it in the Rails asset pipeline</a>.</p>

<p>We&rsquo;ll first add <code>nprogress-rails</code> to our Gemfile:</p>

<figure class='code'><pre><code>gem "nprogress-rails"</code></pre></figure>


<p>Bundle to install the new gem:</p>

<figure class='code'><pre><code>$ bundle install</code></pre></figure>


<p>Now with <code>nprogress</code> installed, we need to include the JavaScript in our application. We&rsquo;ll do this by adding the following the <code>app/assets/javascripts/application.js</code> manifest:</p>

<figure class='code'><pre><code>//= require nprogress
//= require nprogress-turbolinks</code></pre></figure>


<p>We first include the <code>nprogress</code> JavaScript source, and then an adapter that&rsquo;ll hook the Turbolinks request to the progress indicator.</p>

<p><em>Note: If you&rsquo;re familiar with Turbolinks and its events, you&rsquo;ll recognize the <a href="https://github.com/caarlos0/nprogress-rails/blob/master/app/assets/javascripts/nprogress-turbolinks.js">events triggered</a>.</em></p>

<p>By default, the <code>nprogress</code> loading bar is anchored to the top of the browser window, but we need to include some CSS to make this work. Let&rsquo;s open the <code>app/assets/stylesheets/application.scss</code> manifest file and add the following:</p>

<figure class='code'><pre><code>*= require nprogress
*= require nprogress-bootstrap</code></pre></figure>


<p><em>Note: Including <code>nprogress-bootstrap</code> isn&rsquo;t necessary if you don&rsquo;t use <a href="http://getbootstrap.com/css/">Bootstrap</a> in your application. I typically do, so I&rsquo;m going to include it.</em></p>

<p>At this point, we&rsquo;ll have a working loading indicator. But what if we want to tweak the styles to match your application&rsquo;s theme?</p>

<h2>Customizing Nprogress Styles</h2>

<p>Because the <a href="https://github.com/caarlos0/nprogress-rails/blob/master/app/assets/stylesheets/nprogress.scss#L1"><code>nprgress</code> styles are Sass</a>, we can overwrite the variables for customization.</p>

<p>There are 3 variables available to overwite:</p>

<ul>
<li><code>$nprogress-color</code></li>
<li><code>$nprogress-height</code></li>
<li><code>$nprogress-zindex</code></li>
</ul>


<p>For <a href="https://www.bark.us/">Bark</a>, we have an aqua accent color with use throughout the site. It made sense for the <code>nprogress</code> loading indicator to be that same color.</p>

<p>Back in our <code>app/assets/stylesheets/application.scss</code>, I overwrote the variable before including the <code>nprogress</code> source code:</p>

<figure class='code'><pre><code>$nprogress-color: #37c8c9;

@import "nprogress";
@import "nprogress-bootstrap";</code></pre></figure>


<h2>Summary</h2>

<p>I&rsquo;ve found <code>nprogress</code> to be a great companion library to Turbolinks. The two libraries together provide a much better user experience over full page refreshes. Turbolinks helps asynchronously load the page content that&rsquo;s changing and <code>nprogress</code> gives the user feedback that their request is in progress. Now, even when a user has to suffer through multi-second page loads, at least they&rsquo;ll know it&rsquo;s not broken and don&rsquo;t have to click again.</p>

<p>The <a href="https://github.com/turbolinks/turbolinks/blob/master/src/turbolinks/progress_bar.coffee">latest version of Turbolinks has a progress bar
built-in</a>.
I&rsquo;m looking forward to removing the dependency if it performs similarly.</p>

  </div>

  
    <script src="/javascripts/funnel-tools-funnel.min.js"></script>

<div class="funnel-tools-funnel funnel-tools-funnel-default">
  <section class="newsletter-top">
  <img src="/images/newsletter/brandon-hilkert-point-down.png" alt="Brandon Hilkert pointing down">
</section>
<section class="newsletter clearfix">
  <div class="ribbon">
    <span>
      Join 4,000+ Rubyists
    </span>
  </div>
  <section class="picture">
    <img src="/images/newsletter/brandon-hilkert-point-right.png" alt="Brandon Hilkert pointing right">
  </section>
  <section class="signup">
    <h2>Want More?</h2>
    <h3>Ruby and Rails tips delivered to <br />your inbox twice a month</h3>

    <form data-drip-embedded-form="6902355" action="https://www.getdrip.com/forms/6902355/submissions" method="post">
  <div class="email-input-container">
    <input type="email" value="" name="fields[email]" class="email" placeholder="your@email.com" required>
  </div>
  <input type="hidden" name="fields[location]" value="Rails Progress Indicator for Turbolinks Using Nprogress" />
  <input type="submit" value="Send me articles like this!" name="subscribe" class="button">
  <br class="clear">
</form>



    <aside>
      I hate spam as much as you do!
      <br />
      Unsubscribe at any time.
    </aside>
  </section>
</section>


</div>

<div class="funnel-tools-funnel funnel-tools-funnel-course-gem">
  <section class="newsletter-top">
  <img src="/images/newsletter/brandon-hilkert-point-down.png" alt="Brandon Hilkert pointing down">
</section>
<section class="newsletter clearfix">
  <div class="ribbon">
    <span>
      Join 1,300+ Rubyists
    </span>
  </div>
  <section class="picture" style="padding-top: 30px;">
    <img src="/images/newsletter/ruby-logo.png" alt="Ruby lanugage logo">
  </section>
  <section class="signup">
    <h2>Want to Build a Ruby Gem?</h2>
    <h3>A <strong>FREE</strong> 10-day email course helping you <br />build a Ruby Gem from start to finish.</h3>

    <form data-drip-embedded-form="8461781" action="https://www.getdrip.com/forms/8461781/submissions" method="post">
  <div class="email-input-container">
    <input type="email" value="" name="fields[email]" class="email" placeholder="your@email.com" required>
  </div>
  <input type="hidden" name="fields[location]" value="Rails Progress Indicator for Turbolinks Using Nprogress" />
  <input type="submit" value="I want the FREE course!" name="subscribe" class="button">
  <br class="clear">
</form>



    <aside>
      I hate spam as much as you do!
      <br />
      Unsubscribe at any time.
    </aside>
  </section>
</section>



</div>

<div class="funnel-tools-funnel funnel-tools-funnel-book-gem">
  <section class="newsletter-top">
  <img src="/images/newsletter/brandon-hilkert-point-down.png" alt="Brandon Hilkert pointing down">
</section>
<section class="newsletter clearfix">
  <div class="ribbon">
    <span>
      Join 400+ Rubyists
    </span>
  </div>
  <section class="picture">
    <img src="/images/newsletter/build-a-ruby-gem-book.png" style="padding-bottom: 15px;" alt="Build a Ruby Gem book">
  </section>
  <section class="signup">
    <h2>Build a Ruby Gem</h2>
    <h3>Learn to build a <br />Ruby gem from start to finish</h3>
    <h3>19 chapters and 2+ hours of screencasts</h3>
    <h3>Use the link below to get <strong>25% off</strong> any package</h3>
    <a href="/books/build-a-ruby-gem/?utm_source=fo&utm_medium=web&utm_campaign=fo14&c=fo14" class="button">Take me to the book!</a>
  </section>
</section>

</div>

<script>
  FunnelTools.Funnel.load();
</script>

  

  


</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">

    
    <a href="http://bufferapp.com/add" class="buffer-add-button" data-count="horizontal" data-via="brandonhilkert" >Buffer</a>
    <script type="text/javascript" src="https://static.bufferapp.com/js/button.js"></script>
    

    
    <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
    

    
    <a class="addthis_button_tweet"></a>
    

    
    <script type="IN/Share" data-counter="right"></script>
    

    
    <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
    

	</div>
  <script type="text/javascript" src="https://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



</div>
			</div>
      
        <footer id="footer" class="inner"><ul>
  <li>
    <h4>Categories</h4>
    <ul>
      <li><a href="/blog/categories/ruby/">Ruby</a></li>
      <li><a href="/blog/categories/rails/">Rails</a></li>
      <li><a href="/blog/categories/open-source/">Open Source</a></li>
      <li><a href="/blog/categories/marketing/">Marketing</a></li>
      <li><a href="/blog/categories/email-course/">Email Course</a></li>
      <li><a href="/blog/categories/book/">Book</a></li>
    </ul>
  </li>
  <li>
    <h4>Popular Posts</h4>
<ul>
  <li>
    <a href="/blog/7-reasons-why-im-sticking-with-minitest-and-fixtures-in-rails/">7 Reasons I'm sticking with Minitest</a>
  </li>
  <li>
    <a href="/blog/organizing-javascript-in-rails-application-with-turbolinks/">Organizing JS in Rails w/ Turbolinks</a>
  </li>
  <li>
    <a href="/blog/using-rails-4-dot-1-secrets-for-configuration/">Using Rails 4 Secrets for Config</a>
  </li>
  <li>
    <a href="/blog/using-rails-fixtures-to-seed-a-database/">Using Fixtures to Seed a Database</a>
  </li>
  <li>
    <a href="/blog/ruby-gem-configuration-patterns/">Ruby Gem Configuration Patterns</a>
  </li>
  <!-- <li> -->
  <!--   <a href="/blog/how&#45;to&#45;build&#45;a&#45;rails&#45;engine/">How to Build a Rails Engine</a> -->
  <!-- </li> -->
  <!-- <li> -->
  <!--   <a href="/blog/why&#45;i&#45;wrote&#45;the&#45;sucker&#45;punch&#45;gem/">Why I Wrote the Sucker Punch Gem</a> -->
  <!-- </li> -->
  <!-- <li> -->
  <!--   <a href="/blog/setting&#45;up&#45;a&#45;cloudfront&#45;cdn&#45;for&#45;rails/">Setup a Cloudfront CDN for Rails</a> -->
  <!-- </li> -->
  <!-- <li> -->
  <!--   <a href="/blog/3&#45;ways&#45;to&#45;get&#45;started&#45;contributing&#45;to&#45;open&#45;source/">Get Started with Open Source</a> -->
  <!-- </li> -->
</ul>


  </li>
</ul>
<br class="clear" />
<p>
  &copy; 2018 Big Blue Media, LLC. All rights reserved.
</p>
</footer>
        <script src="/javascripts/slash.js"></script>




      
		</div>
	</div>
  <link href="/stylesheets/funnel-tools-capture.css" media="screen, projection" rel="stylesheet" type="text/css">

<div id="funnel-tools-capture" class="bounceInUp">
  <div class="close">&#10005;</div>
  <div class="open">&#8593;</div>

  <div class="title">
    Build a Ruby Gem Course - FREE!
  </div>
  <div class="description">
    <p>
      Join <strong>1,300+</strong> other Rubyists and take your Ruby gem skills to the next level!
    </p>
    <p>
      Whether you're an expert Rubyist, or just starting out,
      this <strong>FREE 10-day</strong> email course will guide you through
      the process of creating your own Ruby gems from start to finish.
    </p>

    <p>
      Enter your email below to get started today:
    </p>
  </div>

  <form data-drip-embedded-form="8461781" action="https://www.getdrip.com/forms/8461781/submissions" method="post">
  <div class="email-input-container">
    <input type="email" value="" name="fields[email]" class="email" placeholder="your@email.com" required>
  </div>
  <input type="hidden" name="fields[location]" value="Rails Progress Indicator for Turbolinks Using Nprogress" />
  <input type="submit" value="I want the FREE course!" name="subscribe" class="button">
  <br class="clear">
</form>


  <p class="funnel-tools-footer">
  Powered by <a href="http://brandonhilkert.com/tools?utm_source=bh-com&utm_medium=web&utm_campaign=ft-capture">Funnel Tools</a>
</p>

</div>


<script src="/javascripts/funnel-tools-capture.min.js"></script>


  <!-- Drip -->
<script type="text/javascript">
  var _dcq = _dcq || [];
  var _dcs = _dcs || {};
  _dcs.account = '7901432';

  (function() {
    var dc = document.createElement('script');
    dc.type = 'text/javascript'; dc.async = true;
    dc.src = '//tag.getdrip.com/7901432.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(dc, s);
  })();
</script>

</body>
</html>
